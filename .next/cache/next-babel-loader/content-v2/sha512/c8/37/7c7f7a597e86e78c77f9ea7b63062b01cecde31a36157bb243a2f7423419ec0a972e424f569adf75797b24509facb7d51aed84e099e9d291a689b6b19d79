{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/home/shubhangi13/Home/Orgs/MERN-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/shubhangi13/Home/Orgs/MERN-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/home/shubhangi13/Home/Orgs/MERN-frontend/src/pages/index.tsx\",\n    _s = $RefreshSig$();\n\nimport DropZoneComponent from \"@components/DropZoneComponent\";\nimport RenderFile from \"@components/RenderFile\";\nimport { useState } from \"react\";\nimport axios from 'axios';\nimport DownloadFile from \"@components/DownloadFile\";\nimport EmailForm from \"@components/EmailForm\";\nexport default function Home() {\n  _s();\n\n  var _useState = useState(null),\n      file = _useState[0],\n      setFile = _useState[1];\n\n  var _useState2 = useState(null),\n      id = _useState2[0],\n      setId = _useState2[1];\n\n  var _useState3 = useState(null),\n      downloadPageLink = _useState3[0],\n      setDownloadPageLink = _useState3[1];\n\n  var _useState4 = useState(\"Upload\"),\n      uploadState = _useState4[0],\n      setUploadState = _useState4[1];\n\n  var handleUpload = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var formData, _yield$axios, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!(uploadState === \"Uploading\")) {\n                _context.next = 2;\n                break;\n              }\n\n              return _context.abrupt(\"return\");\n\n            case 2:\n              setUploadState(\"Uploading\");\n              formData = new FormData();\n              formData.append(\"myFile\", file);\n              _context.prev = 5;\n              _context.next = 8;\n              return axios({\n                method: \"post\",\n                data: formData,\n                url: \"api/files/upload\",\n                headers: {\n                  \"Content-Type\": \"multipart/form-data\"\n                }\n              });\n\n            case 8:\n              _yield$axios = _context.sent;\n              data = _yield$axios.data;\n              setDownloadPageLink(data.downloadPageLink);\n              setId(data.id);\n              setUploadState(\"Upload Failed\");\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t0 = _context[\"catch\"](5);\n              console.log(_context.t0.response.data);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[5, 15]]);\n    }));\n\n    return function handleUpload() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var resetComponent = function resetComponent() {\n    setFile(null);\n    setDownloadPageLink(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \" flex flex-col items-center justify-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"animate-charcter\",\n      children: \"DROP A FILE!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-96 flex flex-col items-center bg-gray-800 shadow-xl rounded-xl jutify-center\",\n      children: [!downloadPageLink && /*#__PURE__*/_jsxDEV(DropZoneComponent, {\n        setFile: setFile\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), file && /*#__PURE__*/_jsxDEV(RenderFile, {\n        file: {\n          format: file.type.split(\"/\")[1],\n          name: file.name,\n          sizeInBytes: file.size\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 13\n      }, this), !downloadPageLink && file && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"p-2 my-5 bg-gray-900 rounded-md w-44 focus:outline-none\",\n        onClick: handleUpload,\n        children: uploadState\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), downloadPageLink && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-2 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(DownloadFile, {\n          downloadPageLink: downloadPageLink\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(EmailForm, {\n          id: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"p-2 my-5 bg-gray-900 rounded-md w-44 focus:outline-none\",\n          onClick: resetComponent,\n          children: \"Upload New File\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Home, \"NMUnEl08qWEBbu9NmclzrNtsPB4=\");\n\n_c = Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"sources":["/home/shubhangi13/Home/Orgs/MERN-frontend/src/pages/index.tsx"],"names":["DropZoneComponent","RenderFile","useState","axios","DownloadFile","EmailForm","Home","file","setFile","id","setId","downloadPageLink","setDownloadPageLink","uploadState","setUploadState","handleUpload","formData","FormData","append","method","data","url","headers","console","log","response","resetComponent","format","type","split","name","sizeInBytes","size"],"mappings":";;;;;;;AAAA,OAAOA,iBAAP,MAA8B,+BAA9B;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,YAAP,MAAyB,0BAAzB;AACA,OAAOC,SAAP,MAAsB,uBAAtB;AACA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAAA,kBAELJ,QAAQ,CAAC,IAAD,CAFH;AAAA,MAEtBK,IAFsB;AAAA,MAEhBC,OAFgB;;AAAA,mBAITN,QAAQ,CAAC,IAAD,CAJC;AAAA,MAItBO,EAJsB;AAAA,MAIlBC,KAJkB;;AAAA,mBAMmBR,QAAQ,CAAC,IAAD,CAN3B;AAAA,MAMtBS,gBANsB;AAAA,MAMJC,mBANI;;AAAA,mBAQSV,QAAQ,CAAsD,QAAtD,CARjB;AAAA,MAQtBW,WARsB;AAAA,MAQTC,cARS;;AAU7B,MAAMC,YAAY;AAAA,wEAAG;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,oBAChBF,WAAW,KAAG,WADE;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAEnBC,cAAAA,cAAc,CAAC,WAAD,CAAd;AACME,cAAAA,QAHa,GAGF,IAAIC,QAAJ,EAHE;AAInBD,cAAAA,QAAQ,CAACE,MAAT,CAAgB,QAAhB,EAAyBX,IAAzB;AAJmB;AAAA;AAAA,qBAMEJ,KAAK,CAAC;AACvBgB,gBAAAA,MAAM,EAAE,MADe;AAEvBC,gBAAAA,IAAI,EAAGJ,QAFgB;AAGvBK,gBAAAA,GAAG,EAAE,kBAHkB;AAIvBC,gBAAAA,OAAO,EAAC;AACN,kCAAgB;AADV;AAJe,eAAD,CANP;;AAAA;AAAA;AAMVF,cAAAA,IANU,gBAMVA,IANU;AAcjBR,cAAAA,mBAAmB,CAACQ,IAAI,CAACT,gBAAN,CAAnB;AACAD,cAAAA,KAAK,CAACU,IAAI,CAACX,EAAN,CAAL;AACAK,cAAAA,cAAc,CAAC,eAAD,CAAd;AAhBiB;AAAA;;AAAA;AAAA;AAAA;AAkBjBS,cAAAA,OAAO,CAACC,GAAR,CAAY,YAAMC,QAAN,CAAeL,IAA3B;;AAlBiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZL,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAwBA,MAAMW,cAAc,GAAC,SAAfA,cAAe,GAAI;AACvBlB,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAI,IAAAA,mBAAmB,CAAC,IAAD,CAAnB;AACD,GAHD;;AAIA,sBACE;AAAK,IAAA,SAAS,EAAC,4CAAf;AAAA,4BACE;AAAI,MAAA,SAAS,EAAC,kBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAEE;AAAK,MAAA,SAAS,EAAC,gFAAf;AAAA,iBAEC,CAACD,gBAAD,iBACC,QAAC,iBAAD;AAAmB,QAAA,OAAO,EAAEH;AAA5B;AAAA;AAAA;AAAA;AAAA,cAHF,EAOID,IAAI,iBACF,QAAC,UAAD;AAAY,QAAA,IAAI,EAAE;AACpBoB,UAAAA,MAAM,EAAEpB,IAAI,CAACqB,IAAL,CAAUC,KAAV,CAAgB,GAAhB,EAAqB,CAArB,CADY;AAEpBC,UAAAA,IAAI,EAAEvB,IAAI,CAACuB,IAFS;AAGpBC,UAAAA,WAAW,EAAExB,IAAI,CAACyB;AAHE;AAAlB;AAAA;AAAA;AAAA;AAAA,cARN,EAmBI,CAACrB,gBAAD,IAAoBJ,IAApB,iBACF;AAAQ,QAAA,SAAS,EAAC,yDAAlB;AAA4E,QAAA,OAAO,EAAEQ,YAArF;AAAA,kBACGF;AADH;AAAA;AAAA;AAAA;AAAA,cApBF,EA4BIF,gBAAgB,iBACd;AAAK,QAAA,SAAS,EAAC,iBAAf;AAAA,gCACF,QAAC,YAAD;AAAc,UAAA,gBAAgB,EAAEA;AAAhC;AAAA;AAAA;AAAA;AAAA,gBADE,eAEF,QAAC,SAAD;AAAW,UAAA,EAAE,EAAEF;AAAf;AAAA;AAAA;AAAA;AAAA,gBAFE,eAGF;AAAQ,UAAA,SAAS,EAAC,yDAAlB;AAA4E,UAAA,OAAO,EAAEiB,cAArF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHE;AAAA;AAAA;AAAA;AAAA;AAAA,cA7BN;AAAA;AAAA;AAAA;AAAA;AAAA,YAFF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AA0CD;;GAhFuBpB,I;;KAAAA,I","sourcesContent":["import DropZoneComponent from \"@components/DropZoneComponent\";\nimport RenderFile from \"@components/RenderFile\";\nimport { useState } from \"react\";\nimport axios from 'axios';\nimport DownloadFile from \"@components/DownloadFile\";\nimport EmailForm from \"@components/EmailForm\";\nexport default function Home() {\n\n  const [file, setFile] = useState(null)\n\n  const [id, setId] = useState(null)\n\n  const [downloadPageLink, setDownloadPageLink] = useState(null)\n\n  const [uploadState, setUploadState] = useState<\"Uploaded\"| \"Uploading\"| \"Upload Failed\" | \"Upload\">(\"Upload\")\n\n  const handleUpload = async () => {\n    if(uploadState===\"Uploading\") return;\n    setUploadState(\"Uploading\");\n    const formData = new FormData()\n    formData.append(\"myFile\",file)\n    try {\n      const {data}=await axios({\n        method: \"post\",\n        data : formData,\n        url: \"api/files/upload\",\n        headers:{\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      });\n      setDownloadPageLink(data.downloadPageLink)\n      setId(data.id);\n      setUploadState(\"Upload Failed\")\n    } catch (error) {\n      console.log(error.response.data);\n\n      \n    }\n  }\n  \n  const resetComponent=()=>{\n    setFile(null)\n    setDownloadPageLink(null)\n  }\n  return (\n    <div className=\" flex flex-col items-center justify-center\">\n      <h1 className=\"animate-charcter\">DROP A FILE!</h1>\n      <div className=\"w-96 flex flex-col items-center bg-gray-800 shadow-xl rounded-xl jutify-center\">\n       { \n       !downloadPageLink&&\n        <DropZoneComponent setFile={setFile}/>\n       }\n        {/* render file */}\n        {\n          file&& (\n            <RenderFile file={{\n          format: file.type.split(\"/\")[1],\n          name: file.name,\n          sizeInBytes: file.size,\n        }}/>\n\n          )\n        }\n        {/* upload button */}\n\n        {\n          !downloadPageLink&& file&&(\n        <button className=\"p-2 my-5 bg-gray-900 rounded-md w-44 focus:outline-none\" onClick={handleUpload}>\n          {uploadState}\n        </button>\n          )\n        }\n\n\n        {\n          downloadPageLink&& (\n            <div className=\"p-2 text-center\">\n          <DownloadFile downloadPageLink={downloadPageLink}/>\n          <EmailForm id={id}/>\n          <button className=\"p-2 my-5 bg-gray-900 rounded-md w-44 focus:outline-none\" onClick={resetComponent}>Upload New File</button>\n          </div>\n          )\n        }\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}